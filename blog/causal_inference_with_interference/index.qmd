---
title: "Causal Inference With Interference"
#author: "Rajinder Mavi"
date: "2025-12-01"
categories: [AB Testing, Data Science, Statistics, Academic]
image: /_assets/construction.png
draft: false
---

Lately I've been exploring research in causal inference.
The last 15 years have been a remarkable journey in the topic of causal inference with interference. 
With the advent of large scale social media platforms there has been enormous interest
in understanding causal inference in an environment that permits interactions
spanning the entire population under consideration.


The goal of causal inference is to understand the causal 
relationship between an independent and dependent variable.
Fundamentally, we would like to understand the impact on the dependent variable $Y_i$ for each individual
with a change in the independent variable $z = 0,1$.
Mathematically, this is quantified by the Average Treatment Effect
$$
\tau(1,0) = \frac1N\sum_{i=1}^N \left(Y_i(1) - Y_i(0) \right)
$$ {#eq-ate-sutva}
where the difference $Y_i(1) - Y_i(0)$ represents the change in the dependent variable 
due to the indepedent variable for the $i^{th}$ unit.
The fundamental problem of causal inference is that one can only observe a unitâ€™s response under a single treatment. 
That is, we can measure $Y_i(1)$ or $Y_i(0)$, but not both.
This issue is mitigated in experiments with random assignments of individuals to the control or treatment group.
The framework of Stable Unit Treatment Value Assumption (SUTVA) requires no cross dependence across unit treatments
and is the primary historical method for estimation of a single, consistent treatment effect on the dependent variable.


The problem of interference within and accross assigment groups of course must immediately be considered unless 
individuals are completely isolated from one another.
Classical approaches to control the interference typically rely on asserting groups of interacting individuals,
but no interference between groups. In that case the assignment consideration is taken at a group level [@Hudgens2008Causal].


In a massively connected component of individuals, there is no hope of assignments of noninteracting groups. 
Thus interference within the group itself must be controlled.
There is an exiting story of the formulation of cluster methods to recover results on treatment effect,
that is, the existence of estimators of (@eq-ate-sutva), and controlling their bias and variance.





Background for this note includes the following ...

::: {.callout-note title="Estimator" collapse="false"}
{{< include /_includes/estimator.qmd >}}
:::

::: {.callout-note title="Horvitz Thompson Estimator" collapse="false"}
{{< include /_includes/estimator_HT.qmd >}}
:::

::: {.callout-note title="Basic Graph theory" collapse="false"}
{{< include /_includes/graph_theory.qmd >}}
:::




Enumerate the users $\mathcal{V} = \{v_1,v_2,...,v_N\}$.
Typically, the network is modeled as a graph $\mathcal{G} = (\mathcal{V},\mathcal{E})$.
In our example two units may be connected by an edge if they are freinds. 
For the sake of the experiment, each user is assigned to one of two groups $z_i = 0,1$, 
with $0$ being the control and $1$ being the treatment.


With an assignment of $z = (z_1,z_2,..,z_N)$ the total of the quantity of interest is 
$$
Y(z) = \sum_{i=1}^N Y_i(z)
$$
where $Y_i$ is the quantity of interest for the $i^{th}$ individual.
For our messaging example, $Y_i$ might be the total number of messages 
the user sent within a two week period.
Notice at this point we are allowing that each individual's behavior depends on the 
entire assignment vector!


The ulimate goal is to estimate
$$
\tau(\vec{1},\vec{0}) = \frac1N\sum_{i=1}^N \left(Y_i(\vec{1}) - Y_i(\vec{0}) \right)
$$ {#eq-ate}
the Average Treatment Effect (ATE). 
Here $\vec{1}$ ($\vec{0}$) is the assignment of $1$s ($0$s) to all individuals.
Of course there is no world where we can simultaneously assign all units both 1 and 0,
hence the goal of our study.


It would be hard to make it very far without making some kind of assumptions on the network effects.
How can we make conclusions about $\tau(\vec{1},\vec{0})$ if we can't isolate the assignment groups?
The earliest paper I found in this direction is [@Ugander2013Graph].
The authors make the assumption of a ***net exposure condition*** which 
effectively assumes that if sufficiently many agents of an individuals neighborhood belong
to a given assignment group, the individual will behave as if the entire network 
has that assignment.
That is, for indivual $v\in\mathcal{V}$, suppose there are $k_i$ individuals in $A_{1,r}(v)$ assigned $z_j = 1 (0)$, 
then we can assume $i$ behaves as if $z = \vec{1} (\vec{0})$. 
Explicit choices of $k_i$ can vary, but the authors consider $k_i$ 
the size of the neighborhood $k_i = |A_{1,r}(v)|$, 
or a proportion of the neighborhood $k_i = \kappa |A_{1,r}(v)|$,
or simply a constant minimum over the network $k_i = \kappa$.

The Ugander paper is notable because they tackle the problem of a globally connected network of individuals.
Compare this to the more mature literature of estimating the ATE 
when there are groups of interacting agents [@Hudgens2008Causal].
In that paper, the population is stratified into groups, 
and interference is limited to individuals among the same group.
For example, a group might be all students in a particular elementary school.
The analogy of the net exposure condition, is the assumption that any two assignments of a fixed group
are equivalent if they have the same number of individuals assigned to 1 and 0 respectively.

::: {.callout-note title="Hudgens and Halloran, 2008" collapse="false"}
The Hudgens and Halloran paper outlines detailed experiment designs.
[Sampling proceedures]
The goal is to measure quantities like (@eq-ate) by group and by individual.
They differentiate a number of different causal effects
* Direct - The impact on $Y_i$ of altering a single individuals assignment $z_i=0 \to z_i=1$ while holding all other assigments fixed.
* Indirect - The impact on $Y_i$ of altering the assignment of all other individuals $\{z_j\}_{j\neq i}$ of a group while holding $z_i$ fixed.
* Total - A combination of direct and indirect effects.

With this variety of quatities the proceed to derive unbiased estimators for the ATEs.
[State corollary of theorem 2]
:::





papers [@Hudgens2008Causal], [@Aronow2017Estimating], [@Ugander2013Graph], [@Eckles2017Design]